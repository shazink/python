<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ patient.name }} - QR Code</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
        }

        .back-link {
            display: inline-block;
            color: white;
            text-decoration: none;
            margin-bottom: 20px;
            padding: 10px 20px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            transition: all 0.3s;
        }

        .back-link:hover {
            background: rgba(255, 255, 255, 0.3);
        }

        .card {
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            text-align: center;
        }

        .patient-header {
            margin-bottom: 30px;
        }

        .patient-id {
            font-size: 1.2rem;
            color: #667eea;
            font-weight: 600;
            margin-bottom: 10px;
        }

        .patient-name {
            font-size: 2.5rem;
            font-weight: bold;
            color: #333;
            margin-bottom: 20px;
        }

        .patient-details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-bottom: 40px;
            text-align: left;
        }

        .detail-item {
            background: #f5f5f5;
            padding: 15px;
            border-radius: 10px;
        }

        .detail-label {
            font-size: 0.9rem;
            color: #999;
            margin-bottom: 5px;
        }

        .detail-value {
            font-size: 1.1rem;
            font-weight: 600;
            color: #333;
        }

        .qr-section {
            margin: 40px 0;
        }

        .qr-section h2 {
            font-size: 1.8rem;
            color: #333;
            margin-bottom: 25px;
        }

        .qr-display {
            background: #f9f9f9;
            padding: 40px;
            border-radius: 15px;
            display: inline-block;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        .qr-display img {
            max-width: 100%;
            height: auto;
            display: block;
        }

        .download-button {
            display: inline-block;
            margin-top: 25px;
            padding: 15px 35px;
            background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
            color: white;
            text-decoration: none;
            border-radius: 10px;
            font-weight: 600;
            font-size: 1.1rem;
            transition: all 0.3s;
        }

        .download-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(56, 239, 125, 0.4);
        }

        .instructions {
            margin-top: 30px;
            padding: 20px;
            background: #e3f2fd;
            border-left: 4px solid #2196f3;
            border-radius: 10px;
            text-align: left;
        }

        .instructions h3 {
            color: #1976d2;
            margin-bottom: 10px;
        }

        .instructions p {
            color: #555;
            line-height: 1.6;
        }
    </style>
</head>

<body>
    <div class="container">
        <a href="{% url 'patients:patient_list' %}" class="back-link">‚Üê Back to Patient List</a>

        <div class="card">
            <div class="patient-header">
                <div class="patient-id">{{ patient.patient_id }}</div>
                <div class="patient-name">{{ patient.name }}</div>
            </div>

            <div class="patient-details">
                <div class="detail-item">
                    <div class="detail-label">Age</div>
                    <div class="detail-value">{{ patient.age }} years</div>
                </div>
                <div class="detail-item">
                    <div class="detail-label">Disease</div>
                    <div class="detail-value">{{ patient.disease|default:"-" }}</div>
                </div>
                <div class="detail-item">
                    <div class="detail-label">Phone</div>
                    <div class="detail-value">{{ patient.phone }}</div>
                </div>
                {% if patient.blood_group %}
                <div class="detail-item">
                    <div class="detail-label">Blood Group</div>
                    <div class="detail-value">{{ patient.blood_group }}</div>
                </div>
                {% endif %}
                <div class="detail-item">
                    <div class="detail-label">Registered</div>
                    <div class="detail-value">{{ patient.created_at|date:"M d, Y" }}</div>
                </div>
                <div class="detail-item">
                    <div class="detail-label">Assigned Doctor</div>
                    <div class="detail-value">{{ patient.doctor.name|default:"Not Assigned" }}</div>
                </div>
            </div>

            <div class="qr-section">
                <h2>Patient Information QR Code</h2>
                {% if patient.qr_code %}
                <div class="qr-display">
                    <img src="{{ patient.qr_code.url }}" alt="QR Code for {{ patient.name }}">
                </div>
                <a href="{{ patient.qr_code.url }}" download="qr_{{ patient.patient_id }}.png" class="download-button">
                    üì• Download QR Code
                </a>
                {% else %}
                <p>QR Code is being generated...</p>
                {% endif %}
            </div>

            <div class="instructions">
                <h3>üì± How to Use This QR Code</h3>
                <p>
                    Scan this QR code with your smartphone camera to instantly view the patient's basic information.
                    You can print this QR code and attach it to patient records, ID cards, or wristbands for quick
                    access.
                </p>
            </div>
        </div>
    </div>
</body>

</html>